const Const = function(n) {
	return {op : 'const', out: undefined, grad : 0, in : [n]};
}
const Add = function (a, b) {
	return {op : 'add', out: undefined, grad : 0, in : [a,b]};
}
const Times = function (a, b) {
	return {op : 'times', out: undefined, grad : 0, in : [a,b]};
}
const Divide = function (a, b) {
	return {op : 'divide', out: undefined, grad : 0, in : [a,b]};
}

function f(x) {
    // Edit me!
    return Add(Times(x, x), Add(x, Const(1)));
}

let in_node = {op: 'const', in: [/* TBD */], out: undefined, grad: 0};
let out_node = f(in_node);

console.log(out_node)

const reset = function (n) {
	n.out = undefined;
	n.grad = 0;
	if(n.op == 'const') console.log(n.op)
	if(n.op !== 'const') n.in.map(reset);
}

function forward(node) {
	if (node.out !== undefined) return;
	if (node.op === 'const') {
		node.out = node.in[0];
	} else if (node.op === 'add') {
		forward(node.in[0]);
		forward(node.in[1]);
		node.out = node.in[0].out + node.in[1].out;
	} else if (node.op === 'times') {
		forward(node.in[0]);
		forward(node.in[1]);
		node.out = node.in[0].out * node.in[1].out;
	} else if(node.op === 'divide') {
		forward(node.in[0]);
		forward(node.in[1]);
		node.out = node.in[0].out / node.in[1].out;
	}

}

const topological_sort = function (n) {
	let order = [];
	let visited = new Set();
	let visit = function (n) {
		if (!visited.has(n)) {
			visited.add(n);
			if(n.name !== 'const') {
				n.in.map(visit);
				order.push(n);
			}
		}
	}
	visit(n);
	return order;
}

function backward(out_node) {
	const order = topological_sort(out_node).reverse();
	for (const node of order) {
		if (node.op === 'add') {
			node.in[0].grad += node.grad;
			node.in[1].grad += node.grad;
		} else if (node.op === 'times') {
			node.in[0].grad += node.in[1].out * node.grad;
			node.in[1].grad += node.in[0].out * node.grad;
		} else if(node.op === 'divide') {
            n.in[0].grad += n.grad / node.in[1].out;
            n.in[1].grad += (-n.grad * node.in[0].out / (node.in[1].out * node.in[1].out));
        }
	}
}

function evaluate(x, in_node, out_node) {
	in_node.in = [x];
	forward(out_node);

	out_node.grad = 1;
	backward(out_node);

	return [out_node.out, in_node.grad];
}

W = H = 256
//   initial a grey image
let guess_image = new Array(W*H*3);
for (let i = 0; i < W * H * 3; i++) {
	guess_image[i] = Const(127);
}

// blurred image
let blurred_guess_image = new Array(W*H*3);

let observed_image = [212,214,226.33333333333334,255,212,214,226.66666666666666,255,212,214,226.77777777777777,255,212,214,226.77777777777777,255,212,214.11111111111111,226.66666666666666,255,212.33333333333334,214.33333333333334,226.77777777777777,255,210.44444444444446,208.22222222222223,216.66666666666666,255,205.66666666666666,200.33333333333334,206.33333333333334,255,205.55555555555554,200.55555555555554,207,255,207.55555555555554,206.77777777777777,217.22222222222223,255,212.33333333333334,214.55555555555554,227.44444444444446,255,212.11111111111111,214.11111111111111,226.55555555555554,255,212,214.33333333333334,226.77777777777777,255,212.55555555555554,213.33333333333334,224.77777777777777,255,209.66666666666666,206.88888888888889,215.77777777777777,255,209.44444444444446,206.55555555555554,215.77777777777777,255,208.66666666666666,207.33333333333334,217.77777777777777,255,211.33333333333334,213.55555555555554,226.77777777777777,255,211.33333333333334,213.33333333333334,226.11111111111111,255,211.33333333333334,213.33333333333334,226,255,211.55555555555554,213.55555555555554,226,255,211.77777777777777,213.77777777777777,226,255,212,214,226,255,212,214,226,255,212,214,226.22222222222223,255,212,214,226.44444444444446,255,212,214,226.66666666666666,255,212,214,226.66666666666666,255,212,214,226.66666666666666,255,212,214,226.66666666666666,255,212.22222222222223,214,226.66666666666666,255,212.44444444444446,214,226.66666666666666,255,212,214,226.22222222222223,255,212,214,226.44444444444446,255,212,214,226.55555555555554,255,211.88888888888889,214,226.55555555555554,255,211.88888888888889,214.33333333333334,227,255,211.77777777777777,212.66666666666666,223.88888888888889,255,205,195.88888888888889,197.55555555555554,255,192.88888888888889,175.55555555555554,170.22222222222223,255,187.33333333333334,169.22222222222223,163.44444444444446,255,194.77777777777777,187,191,255,206.66666666666666,206.77777777777777,217.66666666666666,255,212.11111111111111,214.66666666666666,227.44444444444446,255,212,214.44444444444446,227.33333333333334,255,210.66666666666666,205.55555555555554,211.44444444444446,255,198.44444444444446,185.11111111111111,183.77777777777777,255,195,180.55555555555554,178.33333333333334,255,196.77777777777777,190,195,255,209.11111111111111,210.44444444444446,222.66666666666666,255,212,214.11111111111111,226.77777777777777,255,211.66666666666666,213.66666666666666,226.11111111111111,255,211.77777777777777,213.77777777777777,226.22222222222223,255,211.88888888888889,213.88888888888889,226.22222222222223,255,212,214,226.22222222222223,255,212,214,226.22222222222223,255,212,214,226.44444444444446,255,212,214,226.44444444444446,255,212,214,226.44444444444446,255,212,214,226.33333333333334,255,211.88888888888889,213.88888888888889,226.33333333333334,255,211.88888888888889,213.88888888888889,226.33333333333334,255,212,213.88888888888889,226.33333333333334,255,212.22222222222223,214,226.33333333333334,255,212,214,226.22222222222223,255,212.11111111111111,214,226.44444444444446,255,212.11111111111111,214,226.66666666666666,255,211.88888888888889,213.88888888888889,226.55555555555554,255,211.66666666666666,214.11111111111111,227,255,212,213.22222222222223,225,255,199.77777777777777,185.44444444444446,182.11111111111111,255,180.55555555555554,152.77777777777777,137.44444444444446,255,167.88888888888889,135.11111111111111,115.44444444444444,255,182.55555555555554,165.55555555555554,161,255,203.55555555555554,199.55555555555554,206.66666666666666,255,217.11111111111111,219.55555555555554,232.33333333333334,255,215.66666666666666,215,225.44444444444446,255,206,193,191.44444444444446,255,180.88888888888889,155.55555555555554,142.33333333333334,255,176.55555555555554,153.11111111111111,141.33333333333334,255,185.22222222222223,174.33333333333334,174.88888888888889,255,209.11111111111111,210.44444444444446,222.22222222222223,255,212.66666666666666,214.88888888888889,227.44444444444446,255,212,214.11111111111111,226.33333333333334,255,212,214,226.33333333333334,255,212,214,226.22222222222223,255,212,214,226.22222222222223,255,211.88888888888889,213.88888888888889,226.22222222222223,255,211.77777777777777,213.77777777777777,226.33333333333334,255,211.66666666666666,213.66666666666666,226.22222222222223,255,211.66666666666666,213.66666666666666,226.11111111111111,255,211.66666666666666,213.66666666666666,226,255,211.55555555555554,213.55555555555554,226,255,211.55555555555554,213.66666666666666,226,255,211.66666666666666,213.77777777777777,226,255,211.88888888888889,214,226,255,211.77777777777777,213.77777777777777,226.11111111111111,255,212,213.88888888888889,226.22222222222223,255,212,213.88888888888889,226.33333333333334,255,213.22222222222223,215.11111111111111,227.33333333333334,255,214.22222222222223,216.22222222222223,228.55555555555554,255,215.22222222222223,216.22222222222223,227.66666666666666,255,207.66666666666666,197.88888888888889,198.22222222222223,255,197.88888888888889,178.66666666666666,169.11111111111111,255,189.44444444444446,164.55555555555554,148.88888888888889,255,201.88888888888889,187.11111111111111,182,255,215.44444444444446,209.11111111111111,213,255,226.44444444444446,226.22222222222223,237.22222222222223,255,222.55555555555554,218.11111111111111,225.88888888888889,255,202.22222222222223,185.22222222222223,180.22222222222223,255,168.22222222222223,140.33333333333334,123.77777777777777,255,163,139.11111111111111,126,255,178.88888888888889,168.77777777777777,169.55555555555554,255,209.11111111111111,210.66666666666666,222.77777777777777,255,211.88888888888889,214.33333333333334,227.11111111111111,255,211.22222222222223,213.55555555555554,226.11111111111111,255,211.55555555555554,213.77777777777777,226.33333333333334,255,211.77777777777777,214,226.44444444444446,255,211.88888888888889,214,226.44444444444446,255,211.66666666666666,213.66666666666666,226.33333333333334,255,211.44444444444446,213.44444444444446,226.33333333333334,255,211.33333333333334,213.33333333333334,226.22222222222223,255,211.44444444444446,213.33333333333334,226.11111111111111,255,211.44444444444446,213.33333333333334,226,255,211.33333333333334,213.33333333333334,226,255,211.22222222222223,213.44444444444446,226,255,211.33333333333334,213.55555555555554,226,255,211.55555555555554,213.66666666666666,226,255,211.44444444444446,213.44444444444446,226.11111111111111,255,211.44444444444446,213.44444444444446,226.11111111111111,255,213.77777777777777,215.44444444444446,227.44444444444446,255,220,220.88888888888889,231,255,225.55555555555554,225.22222222222223,233.88888888888889,255,229.55555555555554,229.66666666666666,238,255,226.44444444444446,220.66666666666666,223,255,223.11111111111111,212.55555555555554,208.88888888888889,255,218.88888888888889,203,194.11111111111111,255,225.44444444444446,214.11111111111111,210.77777777777777,255,231.88888888888889,224.55555555555554,226.55555555555554,255,236.66666666666666,232.88888888888889,240.22222222222223,255,229.55555555555554,222.33333333333334,227.33333333333334,255,206.11111111111111,192.77777777777777,191.88888888888889,255,176.33333333333334,157.11111111111111,150.11111111111111,255,172.88888888888889,158.55555555555554,156.44444444444446,255,190,183.22222222222223,188.88888888888889,255,215.77777777777777,216.11111111111111,228.33333333333334,255,219.77777777777777,220.11111111111111,231.66666666666666,255,219.77777777777777,220.22222222222223,231.55555555555554,255,217.44444444444446,218.11111111111111,229.66666666666666,255,214.44444444444446,215.77777777777777,227.88888888888889,255,212.22222222222223,214,226.55555555555554,255,211.66666666666666,213.66666666666666,226.44444444444446,255,211.44444444444446,213.44444444444446,226.11111111111111,255,211.33333333333334,213.33333333333334,226,255,211.44444444444446,213.33333333333334,226,255,211.44444444444446,213.33333333333334,226,255,211.44444444444446,213.44444444444446,226,255,211.33333333333334,213.55555555555554,226,255,211.44444444444446,213.66666666666666,226,255,211.55555555555554,213.66666666666666,226,255,211.44444444444446,213.44444444444446,226,255,211.22222222222223,213.33333333333334,225.88888888888889,255,213.66666666666666,215.55555555555554,227.44444444444446,255,219.11111111111111,219.33333333333334,227.55555555555554,255,229.77777777777777,228.44444444444446,233.77777777777777,255,226.88888888888889,224.66666666666666,227.55555555555554,255,233.66666666666666,230.33333333333334,232.55555555555554,255,235.33333333333334,231.22222222222223,231.77777777777777,255,248.66666666666666,243.22222222222223,242.55555555555554,255,243.33333333333334,237.77777777777777,237.88888888888889,255,241.33333333333334,235.11111111111111,236.44444444444446,255,236.55555555555554,230,233.22222222222223,255,232.77777777777777,225.77777777777777,230,255,211.55555555555554,203.33333333333334,207.55555555555554,255,190.22222222222223,180.22222222222223,183.22222222222223,255,190,181.77777777777777,186.44444444444446,255,207.11111111111111,201.33333333333334,207.55555555555554,255,226.77777777777777,223.88888888888889,231.88888888888889,255,227.77777777777777,224.77777777777777,232.11111111111111,255,221.22222222222223,218.66666666666666,226.33333333333334,255,210.11111111111111,208.22222222222223,216.44444444444446,255,202.11111111111111,201.44444444444446,210.77777777777777,255,203.22222222222223,203.77777777777777,214.66666666666666,255,208,209.55555555555554,221.77777777777777,255,212.11111111111111,214.11111111111111,226.77777777777777,255,211.66666666666666,213.66666666666666,226.11111111111111,255,211.77777777777777,213.66666666666666,226,255,211.77777777777777,213.66666666666666,226,255,211.77777777777777,213.77777777777777,226,255,211.55555555555554,213.66666666666666,226,255,211.44444444444446,213.55555555555554,226,255,211.33333333333334,213.33333333333334,226,255,211.55555555555554,213.55555555555554,226,255,211.22222222222223,213.33333333333334,225.88888888888889,255,213.33333333333334,215.33333333333334,227.33333333333334,255,219.88888888888889,220.11111111111111,228.11111111111111,255,229.22222222222223,227.11111111111111,230.55555555555554,255,214.88888888888889,211.77777777777777,211.55555555555554,255,216.77777777777777,212.44444444444446,211.33333333333334,255,218.88888888888889,213.66666666666666,212.22222222222223,255,237,229.88888888888889,228.22222222222223,255,212.77777777777777,206.77777777777777,205.88888888888889,255,208.22222222222223,202.55555555555554,202.55555555555554,255,210.88888888888889,205.11111111111111,206,255,229.44444444444446,223.11111111111111,226,255,215.55555555555554,210.22222222222223,216.66666666666666,255,200.66666666666666,196.77777777777777,206.33333333333334,255,197.55555555555554,193.55555555555554,202.66666666666666,255,204.77777777777777,200.22222222222223,206.44444444444446,255,209.88888888888889,204.77777777777777,208.22222222222223,255,204.88888888888889,200.22222222222223,203.22222222222223,255,195.22222222222223,191,194.33333333333334,255,183.22222222222223,179.44444444444446,183.55555555555554,255,184.11111111111111,182,188.44444444444446,255,194.55555555555554,194.33333333333334,203.88888888888889,255,207.77777777777777,209.33333333333334,221.44444444444446,255,212.33333333333334,214.33333333333334,227,255,211.77777777777777,213.66666666666666,226.11111111111111,255,211.77777777777777,213.66666666666666,226,255,211.88888888888889,213.77777777777777,226,255,211.77777777777777,213.77777777777777,226,255,211.77777777777777,213.66666666666666,226,255,211.66666666666666,213.55555555555554,226,255,211.66666666666666,213.55555555555554,226,255,211.55555555555554,213.55555555555554,226,255,211.44444444444446,213.44444444444446,226,255,210.88888888888889,213.22222222222223,226.11111111111111,255,217.44444444444446,218.22222222222223,227.22222222222223,255,211.11111111111111,210.22222222222223,214.22222222222223,255,174.44444444444446,172.11111111111111,171.55555555555554,255,176.11111111111111,172.33333333333334,170.66666666666666,255,194.33333333333334,188.88888888888889,187.22222222222223,255,217.88888888888889,211.22222222222223,209.22222222222223,255,177.77777777777777,173.11111111111111,172,255,164.44444444444446,160.66666666666666,160.33333333333334,255,186.44444444444446,181.77777777777777,182,255,221.11111111111111,214.77777777777777,216.33333333333334,255,213.55555555555554,207.55555555555554,212.44444444444446,255,195.77777777777777,191.11111111111111,198.66666666666666,255,187.77777777777777,183.33333333333334,190,255,184.11111111111111,179.66666666666666,182.77777777777777,255,177,172.66666666666666,173.11111111111111,255,163.66666666666666,160.11111111111111,160.88888888888889,255,158.88888888888889,156,158.22222222222223,255,162.44444444444446,159.88888888888889,163.88888888888889,255,176.66666666666666,175.33333333333334,181.88888888888889,255,194.77777777777777,194.88888888888889,204.55555555555554,255,207.77777777777777,209.33333333333334,221.44444444444446,255,212.22222222222223,214.22222222222223,227.11111111111111,255,211.77777777777777,213.66666666666666,226.33333333333334,255,211.77777777777777,213.66666666666666,226.11111111111111,255,211.77777777777777,213.66666666666666,226,255,211.55555555555554,213.55555555555554,226,255,211.44444444444446,213.33333333333334,226,255,211.33333333333334,213.22222222222223,226,255,211.33333333333334,213.22222222222223,226,255,211.22222222222223,213.22222222222223,225.88888888888889,255,211.11111111111111,213.11111111111111,225.77777777777777,255,209.88888888888889,212.22222222222223,225.33333333333334,255,222.22222222222223,223.66666666666666,233.33333333333334,255,193.33333333333334,193.11111111111111,197.66666666666666,255,148,146.66666666666666,146.44444444444446,255,144.88888888888889,141.55555555555554,139.55555555555554,255,187.33333333333334,182.11111111111111,180.22222222222223,255,199.77777777777777,193.77777777777777,191.66666666666666,255,136.33333333333334,132.88888888888889,132,255,118.44444444444444,116.11111111111111,115.88888888888889,255,160.33333333333334,156.44444444444446,156.55555555555554,255,216.44444444444446,210.33333333333334,211.22222222222223,255,211,205.22222222222223,209.22222222222223,255,190.33333333333334,185.77777777777777,192.33333333333334,255,174.77777777777777,170.77777777777777,177.44444444444446,255,162,158.44444444444446,162.33333333333334,255,152.22222222222223,149.44444444444446,151.66666666666666,255,148.44444444444446,147.11111111111111,150.33333333333334,255,157,156.66666666666666,162.11111111111111,255,172,172.11111111111111,179.66666666666666,255,189.44444444444446,190.11111111111111,199.66666666666666,255,203.77777777777777,205.11111111111111,216.44444444444446,255,211.55555555555554,213.44444444444446,226.11111111111111,255,211.77777777777777,213.66666666666666,226.44444444444446,255,211.77777777777777,213.55555555555554,226.22222222222223,255,211.77777777777777,213.66666666666666,226.11111111111111,255,211.77777777777777,213.66666666666666,226.11111111111111,255,211.55555555555554,213.55555555555554,226.11111111111111,255,211.55555555555554,213.44444444444446,226.22222222222223,255,211.66666666666666,213.44444444444446,226.22222222222223,255,211.88888888888889,213.55555555555554,226.33333333333334,255,210.66666666666666,212.66666666666666,225.55555555555554,255,210.44444444444446,212.44444444444446,225.33333333333334,255,210.77777777777777,213,225.88888888888889,255,225.55555555555554,226.22222222222223,234.33333333333334,255,191.66666666666666,191,194.22222222222223,255,159,156.55555555555554,155,255,157.11111111111111,153.22222222222223,151.22222222222223,255,205.22222222222223,199.22222222222223,197,255,194.66666666666666,188.88888888888889,186.88888888888889,255,129.22222222222223,125.77777777777777,124.88888888888889,255,115.88888888888889,113.11111111111111,112.77777777777777,255,165.33333333333334,161,161,255,218.33333333333334,212.22222222222223,213,255,207.33333333333334,202,205.77777777777777,255,186.88888888888889,182.66666666666666,188.66666666666666,255,170.88888888888889,167.22222222222223,174,255,159.66666666666666,156.22222222222223,161.22222222222223,255,154.88888888888889,152,156.55555555555554,255,163.77777777777777,162.55555555555554,168.77777777777777,255,180.55555555555554,181,190.22222222222223,255,199.88888888888889,201.55555555555554,213.22222222222223,255,206.77777777777777,208.66666666666666,221.22222222222223,255,211.66666666666666,213.66666666666666,226.33333333333334,255,211.33333333333334,213.22222222222223,225.77777777777777,255,211.55555555555554,213.44444444444446,225.88888888888889,255,211.88888888888889,213.77777777777777,226.11111111111111,255,212,214,226.11111111111111,255,211.88888888888889,213.88888888888889,226.11111111111111,255,211.77777777777777,213.77777777777777,226.11111111111111,255,211.66666666666666,213.66666666666666,226.22222222222223,255,211.77777777777777,213.55555555555554,226.22222222222223,255,211.88888888888889,213.44444444444446,226.33333333333334,255,210.33333333333334,212.33333333333334,225.22222222222223,255,209.44444444444446,211.66666666666666,224.66666666666666,255,213.88888888888889,215.66666666666666,227.33333333333334,255,228.22222222222223,227.11111111111111,233.33333333333334,255,210.88888888888889,206.77777777777777,207.66666666666666,255,198.11111111111111,191.33333333333334,188.11111111111111,255,195.55555555555554,188.11111111111111,185,255,226.33333333333334,218.33333333333334,215.22222222222223,255,212.22222222222223,205.66666666666666,203.44444444444446,255,165,160.55555555555554,159.55555555555554,255,160.33333333333334,156.11111111111111,155.88888888888889,255,188.11111111111111,182.88888888888889,183.22222222222223,255,222.77777777777777,216.66666666666666,218,255,204.77777777777777,199.66666666666666,203.88888888888889,255,186.11111111111111,181.77777777777777,188.33333333333334,255,172.44444444444446,168.55555555555554,176.22222222222223,255,166.77777777777777,163,169.77777777777777,255,169.44444444444446,166,172.77777777777777,255,190.11111111111111,188.22222222222223,196.88888888888889,255,208.66666666666666,208.66666666666666,219.77777777777777,255,223.33333333333334,224.77777777777777,236.66666666666666,255,220.77777777777777,222.22222222222223,233.88888888888889,255,220.77777777777777,221.88888888888889,233.33333333333334,255,218.77777777777777,219.66666666666666,231.77777777777777,255,216,217.33333333333334,229.44444444444446,255,214,215.77777777777777,227.77777777777777,255,212.44444444444446,214.55555555555554,226.55555555555554,255,212,214,226.33333333333334,255,211.66666666666666,213.66666666666666,226.11111111111111,255,211.77777777777777,213.77777777777777,226.22222222222223,255,212,213.77777777777777,226.22222222222223,255,212.22222222222223,213.77777777777777,226.33333333333334,255,209.77777777777777,211.77777777777777,224.88888888888889,255,209.33333333333334,211.77777777777777,225,255,219.33333333333334,218.11111111111111,226.44444444444446,255,233.33333333333334,225.88888888888889,226.88888888888889,255,237.33333333333334,223.44444444444446,217.55555555555554,255,238.55555555555554,222.22222222222223,214.33333333333334,255,235.44444444444446,219.33333333333334,212,255,243.22222222222223,227.55555555555554,220.33333333333334,255,229.22222222222223,214.88888888888889,208.44444444444446,255,209.77777777777777,197.33333333333334,192.11111111111111,255,208.77777777777777,197.66666666666666,194.22222222222223,255,216.66666666666666,207.44444444444446,206.22222222222223,255,224.44444444444446,217.11111111111111,218.66666666666666,255,204.88888888888889,199.77777777777777,204.88888888888889,255,187.55555555555554,183.44444444444446,191.11111111111111,255,175.11111111111111,171.22222222222223,179.88888888888889,255,169.77777777777777,165.88888888888889,174.11111111111111,255,171.77777777777777,168.11111111111111,176.33333333333334,255,178.55555555555554,176.44444444444446,186.22222222222223,255,181.77777777777777,181.55555555555554,193.11111111111111,255,183.44444444444446,184.88888888888889,197.11111111111111,255,190.22222222222223,191.66666666666666,203.66666666666666,255,202.66666666666666,203.66666666666666,215.88888888888889,255,211.22222222222223,211.55555555555554,224.55555555555554,255,211.88888888888889,212.22222222222223,225.66666666666666,255,207.77777777777777,208.66666666666666,221.77777777777777,255,209.11111111111111,210.66666666666666,223.44444444444446,255,209,211,223.44444444444446,255,212.44444444444446,214.44444444444446,226.88888888888889,255,211.66666666666666,213.66666666666666,226.11111111111111,255,211.55555555555554,213.44444444444446,226,255,211.66666666666666,213.44444444444446,226,255,209.11111111111111,211.33333333333334,224.77777777777777,255,212.88888888888889,213.66666666666666,225.22222222222223,255,226.66666666666666,220.66666666666666,224.66666666666666,255,240.55555555555554,225.77777777777777,221,255,249.44444444444446,227.55555555555554,216.55555555555554,255,247.33333333333334,223.77777777777777,212.11111111111111,255,245.44444444444446,222.22222222222223,210.88888888888889,255,243.44444444444446,221,210,255,243.66666666666666,222.22222222222223,212,255,244.11111111111111,223.88888888888889,214.88888888888889,255,241.88888888888889,223.11111111111111,215.66666666666666,255,235.55555555555554,219.11111111111111,213.77777777777777,255,223,209.77777777777777,207.77777777777777,255,206.22222222222223,196.66666666666666,199.11111111111111,255,189.33333333333334,183,189.88888888888889,255,177.33333333333334,172.88888888888889,181.88888888888889,255,171.55555555555554,167.88888888888889,177.11111111111111,255,174.88888888888889,171.55555555555554,180.55555555555554,255,167.22222222222223,165.22222222222223,175,255,156.55555555555554,156.22222222222223,167,255,143,144.11111111111111,154.88888888888889,255,150.11111111111111,151.33333333333334,162,255,171.11111111111111,171.77777777777777,183.66666666666666,255,192.66666666666666,192.44444444444446,206.44444444444446,255,204.44444444444446,203.77777777777777,219,255,202.22222222222223,201.77777777777777,216.77777777777777,255,194.44444444444446,195.11111111111111,209.11111111111111,255,197.66666666666666,199.22222222222223,212.44444444444446,255,204.22222222222223,206.33333333333334,219,255,212.44444444444446,214.44444444444446,227,255,211.44444444444446,213.44444444444446,226,255,211.33333333333334,213.33333333333334,225.77777777777777,255,208.55555555555554,211.11111111111111,224.88888888888889,255,217.22222222222223,214.77777777777777,223.11111111111111,255,222.44444444444446,208.55555555555554,205.22222222222223,255,235.77777777777777,211.44444444444446,198.22222222222223,255,238.66666666666666,209.44444444444446,192.66666666666666,255,245.11111111111111,217.33333333333334,203.11111111111111,255,244.11111111111111,216.33333333333334,202,255,244,216.22222222222223,202,255,243,215.33333333333334,201.33333333333334,255,241.44444444444446,214.44444444444446,201.44444444444446,255,238.88888888888889,213.33333333333334,201.66666666666666,255,233.66666666666666,211,201.77777777777777,255,222.33333333333334,203.44444444444446,197.77777777777777,255,205.77777777777777,190.88888888888889,189.66666666666666,255,189.66666666666666,178.22222222222223,181.11111111111111,255,178.11111111111111,169.77777777777777,175.66666666666666,255,172.66666666666666,167.11111111111111,174.77777777777777,255,176,172.44444444444446,181.11111111111111,255,159.22222222222223,157.22222222222223,166.33333333333334,255,131.22222222222223,130.77777777777777,140,255,100.22222222222223,101.22222222222223,110.88888888888889,255,99.77777777777777,101.44444444444444,111.33333333333333,255,122.66666666666667,124,135.44444444444446,255,158.11111111111111,158.44444444444446,172.11111111111111,255,183.44444444444446,182.44444444444446,198.33333333333334,255,192.66666666666666,191,207.33333333333334,255,184.77777777777777,183.77777777777777,199.11111111111111,255,185.33333333333334,185.66666666666666,199.55555555555554,255,195.88888888888889,197.33333333333334,210.22222222222223,255,207.33333333333334,209.11111111111111,221.66666666666666,255,212.11111111111111,214,226.66666666666666,255,211.11111111111111,213,225.77777777777777,255,208.22222222222223,211.11111111111111,225,255,218.55555555555554,213.44444444444446,218.66666666666666,255,214.88888888888889,197.44444444444446,190,255,225.11111111111111,197.55555555555554,180.11111111111111,255,223.77777777777777,194.88888888888889,177.11111111111111,255,237,211,196.66666666666666,255,237.22222222222223,211,196.55555555555554,255,238.55555555555554,212.22222222222223,198.11111111111111,255,230.22222222222223,201.88888888888889,186,255,223,193.22222222222223,176.66666666666666,255,221.11111111111111,191.66666666666666,175.66666666666666,255,223.88888888888889,197.33333333333334,184.77777777777777,255,218.33333333333334,195.44444444444446,186.77777777777777,255,202,182,176.88888888888889,255,187.11111111111111,170.55555555555554,169.22222222222223,255,176.55555555555554,163.44444444444446,165,255,172.77777777777777,164.11111111111111,168.66666666666666,255,173.33333333333334,168.11111111111111,174.55555555555554,255,164.77777777777777,161.77777777777777,169.33333333333334,255,143.55555555555554,141.66666666666666,148.88888888888889,255,114.44444444444444,114,121.33333333333333,255,96.88888888888889,97.88888888888889,105.66666666666667,255,99.66666666666667,100.88888888888889,110,255,135.77777777777777,136,148.11111111111111,255,167.88888888888889,166.88888888888889,181.55555555555554,255,189.66666666666666,187.44444444444446,203.55555555555554,255,178.22222222222223,176.22222222222223,191.66666666666666,255,178.55555555555554,177.22222222222223,191.66666666666666,255,189.77777777777777,190.11111111111111,203.22222222222223,255,205.44444444444446,206.66666666666666,219.11111111111111,255,213.22222222222223,215.11111111111111,227.44444444444446,255,211.11111111111111,213,225.66666666666666,255,208.33333333333334,211.11111111111111,224.77777777777777,255,215.22222222222223,211.44444444444446,217.88888888888889,255,204.33333333333334,189,183.11111111111111,255,206.88888888888889,182.11111111111111,166.55555555555554,255,202.88888888888889,175.88888888888889,158.44444444444446,255,217.88888888888889,193.55555555555554,179.22222222222223,255,220.33333333333334,195.66666666666666,181.11111111111111,255,223.22222222222223,198.44444444444446,184.33333333333334,255,213.88888888888889,186.55555555555554,170.22222222222223,255,205.77777777777777,176.66666666666666,159.22222222222223,255,204.44444444444446,175.66666666666666,159,255,209.22222222222223,183.88888888888889,171.55555555555554,255,206.66666666666666,184.77777777777777,176.55555555555554,255,192.88888888888889,172.44444444444446,166.55555555555554,255,181,161.88888888888889,157.55555555555554,255,172.77777777777777,156.11111111111111,153.77777777777777,255,169.55555555555554,158.11111111111111,159.11111111111111,255,168.88888888888889,162.22222222222223,166.11111111111111,255,170.55555555555554,166.66666666666666,172.55555555555554,255,157.88888888888889,154.77777777777777,160.88888888888889,255,131,129.55555555555554,136.22222222222223,255,104.77777777777777,105.22222222222223,112.22222222222223,255,91.55555555555556,92.88888888888889,100.33333333333333,255,118.88888888888889,119.22222222222223,129,255,150.44444444444446,149.55555555555554,162,255,180.66666666666666,178.33333333333334,192.88888888888889,255,184.22222222222223,181.22222222222223,196.11111111111111,255,177,174.44444444444446,188.33333333333334,255,188.55555555555554,187.44444444444446,200.22222222222223,255,198.55555555555554,199.22222222222223,211.33333333333334,255,213.55555555555554,215.22222222222223,227.44444444444446,255,211.11111111111111,213,225.66666666666666,255,208.22222222222223,210.88888888888889,224,255,210.77777777777777,210.22222222222223,219.77777777777777,255,205,198.11111111111111,200.88888888888889,255,201.55555555555554,187.77777777777777,183.11111111111111,255,193.55555555555554,175.66666666666666,166.66666666666666,255,193.66666666666666,174.55555555555554,163.88888888888889,255,192.77777777777777,172.22222222222223,160.11111111111111,255,194.55555555555554,173.44444444444446,160.88888888888889,255,186.55555555555554,162.44444444444446,147.44444444444446,255,179.22222222222223,153.22222222222223,136.66666666666666,255,178.77777777777777,153,137.11111111111111,255,184.77777777777777,162.11111111111111,150,255,185.88888888888889,166,157.55555555555554,255,176.88888888888889,157.88888888888889,151.11111111111111,255,169.44444444444446,151.77777777777777,146.66666666666666,255,165,149.88888888888889,146.44444444444446,255,164.77777777777777,154.22222222222223,153.66666666666666,255,167,160.33333333333334,162.33333333333334,255,168.66666666666666,164.44444444444446,168.88888888888889,255,156.77777777777777,153.44444444444446,159,255,129.88888888888889,128.44444444444446,134.66666666666666,255,105.11111111111111,105.33333333333333,111.88888888888889,255,90.88888888888889,92.22222222222223,99,255,106.22222222222223,106.88888888888889,115.33333333333333,255,128.11111111111111,128,138.33333333333334,255,157.11111111111111,155.66666666666666,168,255,171.44444444444446,169,182,255,166.88888888888889,164.77777777777777,177,255,180.33333333333334,179.22222222222223,190.55555555555554,255,191.44444444444446,192.22222222222223,203.44444444444446,255,213.22222222222223,214.77777777777777,226.66666666666666,255,211.11111111111111,213.11111111111111,225.55555555555554,255,208.33333333333334,210.66666666666666,223.55555555555554,255,208.77777777777777,210.66666666666666,223.11111111111111,255,206.66666666666666,206.33333333333334,216.33333333333334,255,201.77777777777777,198,204,255,194.88888888888889,187.22222222222223,189.11111111111111,255,189.66666666666666,179.55555555555554,178.55555555555554,255,186.77777777777777,174.66666666666666,171.66666666666666,255,184.33333333333334,171.11111111111111,166.33333333333334,255,180.33333333333334,165.33333333333334,158.77777777777777,255,175.77777777777777,159.77777777777777,151.66666666666666,255,171.55555555555554,154.77777777777777,146,255,167.88888888888889,151.22222222222223,142.88888888888889,255,164.77777777777777,148.44444444444446,140.88888888888889,255,161.88888888888889,146.11111111111111,139.44444444444446,255,160.55555555555554,146.55555555555554,141.33333333333334,255,161,149.88888888888889,147,255,162.77777777777777,155.11111111111111,154.66666666666666,255,168.33333333333334,162.88888888888889,164.66666666666666,255,159.55555555555554,155.88888888888889,159.33333333333334,255,141,138.66666666666666,143.44444444444446,255,112.77777777777777,112.44444444444444,117.88888888888889,255,98.66666666666667,99.33333333333333,105.22222222222223,255,92.55555555555556,93.88888888888889,100.22222222222223,255,96.66666666666667,97.77777777777777,105,255,109.22222222222223,109.88888888888889,118.44444444444444,255,130.55555555555554,130.44444444444446,140.44444444444446,255,157.11111111111111,155.55555555555554,166.55555555555554,255,157.44444444444446,156.22222222222223,166.55555555555554,255,178.55555555555554,177.44444444444446,187.66666666666666,255,187.66666666666666,188.44444444444446,199.22222222222223,255,213.66666666666666,214.88888888888889,227,255,210.77777777777777,212.77777777777777,225.33333333333334,255,208.55555555555554,210.77777777777777,223.22222222222223,255,208.22222222222223,210.44444444444446,223.11111111111111,255,208.22222222222223,210.44444444444446,223.55555555555554,255,205.88888888888889,207.44444444444446,219.66666666666666,255,201.66666666666666,201.55555555555554,212.11111111111111,255,195.55555555555554,193.44444444444446,201.33333333333334,255,190.77777777777777,186.88888888888889,192.88888888888889,255,186.88888888888889,182,186.22222222222223,255,186.11111111111111,180.11111111111111,182.77777777777777,255,187.66666666666666,179.77777777777777,178.66666666666666,255,186.66666666666666,176.88888888888889,172.55555555555554,255,176.88888888888889,165.66666666666666,159.11111111111111,255,163.77777777777777,152.66666666666666,146.66666666666666,255,155.88888888888889,145.11111111111111,140,255,156.44444444444446,146.88888888888889,143.22222222222223,255,160.55555555555554,152.88888888888889,151.11111111111111,255,165.44444444444446,159.66666666666666,159.88888888888889,255,168.66666666666666,163.88888888888889,165.77777777777777,255,148.44444444444446,145.33333333333334,148.55555555555554,255,121.22222222222223,119.88888888888889,124.22222222222223,255,95.88888888888889,96.55555555555556,101.44444444444444,255,92.44444444444444,93.44444444444444,98.77777777777777,255,93.33333333333333,94.44444444444444,100.33333333333333,255,92.44444444444444,93.55555555555556,99.77777777777777,255,94.55555555555556,95.66666666666667,102.66666666666667,255,108.88888888888889,110,117.88888888888889,255,141.33333333333334,141.11111111111111,150.22222222222223,255,157.11111111111111,156.66666666666666,165.77777777777777,255,184.33333333333334,183.22222222222223,192.77777777777777,255,191.77777777777777,192.22222222222223,202.77777777777777,255,212.77777777777777,213.77777777777777,225.88888888888889,255,210.55555555555554,212.55555555555554,225.33333333333334,255,209.11111111111111,211.11111111111111,223.55555555555554,255,208.77777777777777,210.77777777777777,223.22222222222223,255,208.22222222222223,210.33333333333334,222.88888888888889,255,207.77777777777777,210.11111111111111,222.77777777777777,255,207.88888888888889,210.33333333333334,223.33333333333334,255,207.77777777777777,210.11111111111111,223,255,206.22222222222223,208,220.44444444444446,255,202.44444444444446,203.77777777777777,215.33333333333334,255,203.44444444444446,203.77777777777777,213.33333333333334,255,207.55555555555554,204.88888888888889,208.66666666666666,255,208.55555555555554,202.88888888888889,201,255,195.33333333333334,187.33333333333334,181.77777777777777,255,175.77777777777777,168.11111111111111,163.33333333333334,255,162.88888888888889,155.77777777777777,152.44444444444446,255,161.44444444444446,155.33333333333334,153.44444444444446,255,165.88888888888889,160.33333333333334,159.77777777777777,255,170.33333333333334,165.22222222222223,165.88888888888889,255,168.66666666666666,163.77777777777777,165.66666666666666,255,139.77777777777777,137,140,255,112.33333333333333,111.33333333333333,115.33333333333333,255,89.11111111111111,90,94.55555555555556,255,91.44444444444444,92.44444444444444,97.33333333333333,255,91.55555555555556,92.66666666666667,98,255,95.66666666666667,96.44444444444444,102.11111111111111,255,103.77777777777777,104.11111111111111,110.55555555555556,255,118.55555555555556,118.88888888888889,126.33333333333333,255,149.11111111111111,148.55555555555554,157.22222222222223,255,171,170,179.22222222222223,255,193.44444444444446,191.55555555555554,201.22222222222223,255,199.22222222222223,198.77777777777777,209.44444444444446,255,209.11111111111111,209.77777777777777,221.66666666666666,255,210.77777777777777,212.77777777777777,225.44444444444446,255,209.44444444444446,211.11111111111111,223.55555555555554,255,209,210.77777777777777,223.22222222222223,255,208.44444444444446,210.33333333333334,222.77777777777777,255,207.77777777777777,209.77777777777777,222.22222222222223,255,207.11111111111111,209.11111111111111,221.66666666666666,255,206.33333333333334,208.33333333333334,220.88888888888889,255,205.66666666666666,207.77777777777777,220.44444444444446,255,204.33333333333334,206.77777777777777,219.66666666666666,255,211.66666666666666,213.44444444444446,224.44444444444446,255,220.33333333333334,218.77777777777777,223.11111111111111,255,226.33333333333334,221.55555555555554,219.33333333333334,255,212.77777777777777,205.88888888888889,199.77777777777777,255,191.33333333333334,185.11111111111111,180.66666666666666,255,173.44444444444446,167.77777777777777,165,255,167.66666666666666,162.33333333333334,161.22222222222223,255,169.66666666666666,164.44444444444446,164.22222222222223,255,172.55555555555554,167.44444444444446,168.11111111111111,255,169.55555555555554,164.77777777777777,166.44444444444446,255,147.55555555555554,144.44444444444446,147,255,124.44444444444444,122.66666666666667,126.22222222222223,255,105.88888888888889,105.55555555555556,109.77777777777777,255,107.33333333333333,107.11111111111111,111.88888888888889,255,112.77777777777777,112.44444444444444,117.66666666666667,255,121.33333333333333,120.55555555555556,126.11111111111111,255,130.33333333333334,129.11111111111111,135.33333333333334,255,142.22222222222223,141,148.55555555555554,255,163.44444444444446,162.11111111111111,171.33333333333334,255,181,179.44444444444446,189.66666666666666,255,189.55555555555554,187.33333333333334,197.22222222222223,255,196.33333333333334,195.22222222222223,205.55555555555554,255,202.55555555555554,202.77777777777777,213.77777777777777,255,211.11111111111111,213,225.11111111111111,255,209.44444444444446,211,223.22222222222223,255,209,210.66666666666666,222.88888888888889,255,208.44444444444446,210.33333333333334,222.44444444444446,255,207.88888888888889,209.88888888888889,221.77777777777777,255,207.22222222222223,209.22222222222223,221.22222222222223,255,206.33333333333334,208.22222222222223,220.33333333333334,255,205.22222222222223,207.22222222222223,219.55555555555554,255,203.22222222222223,205.44444444444446,218.11111111111111,255,210.55555555555554,211.33333333333334,220.88888888888889,255,214.55555555555554,212.22222222222223,215.44444444444446,255,216.11111111111111,210.77777777777777,207.88888888888889,255,205.22222222222223,198.55555555555554,193.22222222222223,255,190.77777777777777,184.44444444444446,180.33333333333334,255,178.77777777777777,172.77777777777777,169.77777777777777,255,170.22222222222223,164.66666666666666,163.22222222222223,255,169.33333333333334,164.33333333333334,163.77777777777777,255,170.33333333333334,165.66666666666666,165.88888888888889,255,169.66666666666666,165.11111111111111,166,255,158.77777777777777,155.11111111111111,156.88888888888889,255,146.77777777777777,143.66666666666666,146.55555555555554,255,136.33333333333334,134,138,255,137.11111111111111,134.88888888888889,139.88888888888889,255,141.44444444444446,139.33333333333334,145,255,148.55555555555554,146.33333333333334,152.44444444444446,255,156.33333333333334,153.77777777777777,160.66666666666666,255,165.66666666666666,163.22222222222223,172,255,175.11111111111111,172.88888888888889,182.33333333333334,255,179.66666666666666,177.33333333333334,186.66666666666666,255,177.11111111111111,174.22222222222223,182.11111111111111,255,186.55555555555554,184.88888888888889,194,255,196.44444444444446,196.44444444444446,207,255,208.77777777777777,210.66666666666666,222.77777777777777,255,208.88888888888889,210.44444444444446,222.55555555555554,255,208.55555555555554,210.22222222222223,222.22222222222223,255,208.22222222222223,210,221.88888888888889,255,207.88888888888889,209.77777777777777,221.44444444444446,255,207.22222222222223,209.11111111111111,221,255,206.11111111111111,208,219.88888888888889,255,204.55555555555554,206.55555555555554,218.66666666666666,255,202.44444444444446,204.66666666666666,217,255,209.33333333333334,209.55555555555554,218.11111111111111,255,211.22222222222223,208.44444444444446,210.77777777777777,255,209.55555555555554,203.77777777777777,200.55555555555554,255,196.22222222222223,189.88888888888889,185.44444444444446,255,184.66666666666666,178.66666666666666,175.55555555555554,255,175.66666666666666,170,167.66666666666666,255,167.22222222222223,161.88888888888889,160.55555555555554,255,162.88888888888889,158.11111111111111,157.44444444444446,255,161.77777777777777,157.44444444444446,157.22222222222223,255,165.88888888888889,161.44444444444446,161.66666666666666,255,168.44444444444446,164.22222222222223,165,255,169,164.55555555555554,166.55555555555554,255,167.11111111111111,162.77777777777777,166.33333333333334,255,167.66666666666666,163.33333333333334,168.66666666666666,255,170.22222222222223,166.22222222222223,172.44444444444446,255,171.88888888888889,168.33333333333334,175.44444444444446,255,170.11111111111111,167,174.66666666666666,255,166.44444444444446,163.44444444444446,171.44444444444446,255,166.77777777777777,163.88888888888889,170.55555555555554,255,166.88888888888889,163.55555555555554,169,255,165.77777777777777,162.44444444444446,167.66666666666666,255,173.77777777777777,172.22222222222223,181.22222222222223,255,182.55555555555554,183.11111111111111,195.44444444444446,255,193.33333333333334,195.88888888888889,210.88888888888889,255,208.33333333333334,210.22222222222223,221.66666666666666,255,208.22222222222223,210,221.44444444444446,255,208,209.77777777777777,221.22222222222223,255,207.77777777777777,209.55555555555554,220.77777777777777,255,207.11111111111111,209,220.22222222222223,255,206,207.88888888888889,219,255,204.22222222222223,206.22222222222223,217.55555555555554,255,201.77777777777777,203.88888888888889,215.66666666666666,255,208.11111111111111,208,216,255,210.22222222222223,207.11111111111111,209.11111111111111,255,207.55555555555554,201.55555555555554,198.11111111111111,255,192.66666666666666,186.44444444444446,182.55555555555554,255,178.11111111111111,172.44444444444446,170.11111111111111,255,167,161.66666666666666,160,255,159.88888888888889,155.11111111111111,153.88888888888889,255,156,151.88888888888889,151.33333333333334,255,157.88888888888889,154,153.66666666666666,255,162.77777777777777,158.33333333333334,157.77777777777777,255,170.88888888888889,166,165.55555555555554,255,177.44444444444446,172.22222222222223,173.11111111111111,255,180.88888888888889,175.55555555555554,178.66666666666666,255,180.44444444444446,175.33333333333334,180.44444444444446,255,176.11111111111111,171.66666666666666,178,255,172.11111111111111,168.77777777777777,176.77777777777777,255,158.22222222222223,156,164.55555555555554,255,145.11111111111111,143.33333333333334,150.77777777777777,255,135.22222222222223,133.33333333333334,137.44444444444446,255,136.22222222222223,133.66666666666666,135.44444444444446,255,141.77777777777777,139.66666666666666,143.33333333333334,255,152.88888888888889,152.77777777777777,162.66666666666666,255,164.22222222222223,166.11111111111111,181.77777777777777,255,172.44444444444446,175.77777777777777,194.66666666666666,255,207.77777777777777,210,221,255,207.77777777777777,209.77777777777777,220.77777777777777,255,207.66666666666666,209.55555555555554,220.55555555555554,255,207.44444444444446,209.22222222222223,220.11111111111111,255,206.77777777777777,208.66666666666666,219.44444444444446,255,205.55555555555554,207.33333333333334,218,255,203.55555555555554,205.44444444444446,216.22222222222223,255,200.88888888888889,202.77777777777777,213.88888888888889,255,207.11111111111111,206.88888888888889,214.33333333333334,255,210.55555555555554,207.22222222222223,209.11111111111111,255,209.66666666666666,203.55555555555554,200.33333333333334,255,193.44444444444446,187,183.55555555555554,255,177,171.33333333333334,169.55555555555554,255,161,155.66666666666666,154.55555555555554,255,156.55555555555554,152.33333333333334,151.55555555555554,255,156.77777777777777,153.55555555555554,153.66666666666666,255,165.11111111111111,162.33333333333334,162.66666666666666,255,172.44444444444446,168.44444444444446,167.66666666666666,255,179.33333333333334,174.22222222222223,172.55555555555554,255,183.55555555555554,177.88888888888889,177.11111111111111,255,183.22222222222223,177.77777777777777,179.66666666666666,255,180.44444444444446,175.33333333333334,179.55555555555554,255,175.33333333333334,170.88888888888889,176.77777777777777,255,169.77777777777777,166.55555555555554,174.66666666666666,255,149.11111111111111,147.55555555555554,155.55555555555554,255,125.88888888888889,124.88888888888889,130.22222222222223,255,109.22222222222223,108.33333333333333,109.66666666666667,255,111.77777777777777,110.44444444444444,110.77777777777777,255,123.66666666666667,123.44444444444444,128.77777777777777,255,135.77777777777777,137.22222222222223,150.11111111111111,255,146.22222222222223,149.22222222222223,168.44444444444446,255,151.88888888888889,155.77777777777777,177.77777777777777,255,207.55555555555554,209.55555555555554,220.22222222222223,255,207.33333333333334,209.22222222222223,219.88888888888889,255,207,208.77777777777777,219.44444444444446,255,206.77777777777777,208.33333333333334,218.88888888888889,255,206.33333333333334,207.88888888888889,218.11111111111111,255,205.33333333333334,206.77777777777777,216.77777777777777,255,203.55555555555554,205.11111111111111,215,255,200.66666666666666,202.11111111111111,212.33333333333334,255,205.55555555555554,205.33333333333334,212.55555555555554,255,209.77777777777777,206.44444444444446,208.44444444444446,255,211.11111111111111,205.22222222222223,202.55555555555554,255,198.66666666666666,191.88888888888889,188.77777777777777,255,180.77777777777777,175,173.55555555555554,255,158,152.77777777777777,151.88888888888889,255,152.77777777777777,149.22222222222223,148.55555555555554,255,158.55555555555554,156.22222222222223,156.22222222222223,255,174.66666666666666,172.88888888888889,173,255,185.66666666666666,182,180.11111111111111,255,191.33333333333334,185.88888888888889,182.88888888888889,255,194.55555555555554,188.22222222222223,185.77777777777777,255,189.44444444444446,183.77777777777777,184.44444444444446,255,183,177.88888888888889,181.11111111111111,255,175.88888888888889,171.44444444444446,176.88888888888889,255,166.55555555555554,163.44444444444446,171.33333333333334,255,142.22222222222223,141.11111111111111,149,255,118,118.22222222222223,124.77777777777777,255,100.77777777777777,101.66666666666667,106.22222222222223,255,103.22222222222223,104.22222222222223,109.55555555555556,255,114.33333333333333,116.22222222222223,126.33333333333333,255,126.88888888888889,129.55555555555554,145,255,138.44444444444446,141.88888888888889,162,255,143.22222222222223,147,168.66666666666666,255,207.44444444444446,209.22222222222223,219.55555555555554,255,207,208.88888888888889,219.22222222222223,255,206.44444444444446,208.22222222222223,218.55555555555554,255,206.11111111111111,207.55555555555554,217.66666666666666,255,205.77777777777777,207,216.66666666666666,255,205,206.11111111111111,215.44444444444446,255,203.66666666666666,204.88888888888889,213.88888888888889,255,201.22222222222223,202.33333333333334,211.33333333333334,255,203.44444444444446,203.77777777777777,210.77777777777777,255,199.11111111111111,197.22222222222223,200,255,192.22222222222223,188.44444444444446,187.55555555555554,255,175.33333333333334,170.66666666666666,169,255,160,156.22222222222223,156,255,139,135.77777777777777,136.11111111111111,255,138.77777777777777,136.66666666666666,137.11111111111111,255,149.66666666666666,148.22222222222223,149.11111111111111,255,166.22222222222223,165.55555555555554,166.88888888888889,255,184.55555555555554,181.55555555555554,180.11111111111111,255,194.44444444444446,189.44444444444446,186.22222222222223,255,205.55555555555554,198.66666666666666,194.77777777777777,255,195.77777777777777,189.77777777777777,189.11111111111111,255,185.88888888888889,180.44444444444446,182.66666666666666,255,176.88888888888889,172.22222222222223,177.11111111111111,255,163,159.88888888888889,167.44444444444446,255,143.11111111111111,142,150.33333333333334,255,123.44444444444444,124,132.66666666666666,255,113.77777777777777,115.11111111111111,123.33333333333333,255,115.77777777777777,117.55555555555556,127.77777777777777,255,123,125.44444444444444,139.33333333333334,255,131.11111111111111,133.88888888888889,151.33333333333334,255,137.77777777777777,141,161.11111111111111,255,140.77777777777777,144.22222222222223,165.11111111111111,255,207.33333333333334,208.77777777777777,219.11111111111111,255,206.66666666666666,208.33333333333334,218.44444444444446,255,205.88888888888889,207.55555555555554,217.44444444444446,255,205.44444444444446,206.88888888888889,216.44444444444446,255,205.22222222222223,206.44444444444446,215.55555555555554,255,204.66666666666666,205.77777777777777,214.44444444444446,255,203.66666666666666,204.77777777777777,212.88888888888889,255,201.77777777777777,202.77777777777777,210.55555555555554,255,201.66666666666666,202.44444444444446,209.22222222222223,255,195.22222222222223,194.77777777777777,198.66666666666666,255,179.22222222222223,177.55555555555554,178.66666666666666,255,155.55555555555554,153.11111111111111,152.88888888888889,255,134.77777777777777,132.88888888888889,133.22222222222223,255,117.55555555555556,116.22222222222223,117.33333333333333,255,118,117.22222222222223,119.11111111111111,255,125.44444444444444,124.88888888888889,127.55555555555556,255,135.11111111111111,135,138.55555555555554,255,155.22222222222223,153.55555555555554,154,255,173.33333333333334,169.77777777777777,167.88888888888889,255,195.44444444444446,189.77777777777777,186.11111111111111,255,190.77777777777777,185.11111111111111,184.22222222222223,255,179.66666666666666,174.66666666666666,176.44444444444446,255,165.88888888888889,162.22222222222223,166.88888888888889,255,150.77777777777777,149,156.66666666666666,255,137.11111111111111,137.11111111111111,147,255,127.77777777777777,129,140.88888888888889,255,125.66666666666667,127.44444444444444,140.55555555555554,255,128.55555555555554,130.88888888888889,146.22222222222223,255,131.66666666666666,134.55555555555554,151.66666666666666,255,135.11111111111111,138.22222222222223,156.88888888888889,255,138.55555555555554,141.88888888888889,161.66666666666666,255,140.88888888888889,144.33333333333334,164.77777777777777,255,207.11111111111111,208.55555555555554,218.44444444444446,255,206.55555555555554,208.11111111111111,217.77777777777777,255,205.77777777777777,207.33333333333334,216.77777777777777,255,205.11111111111111,206.55555555555554,215.66666666666666,255,204.66666666666666,206,214.66666666666666,255,204.22222222222223,205.44444444444446,213.55555555555554,255,203.55555555555554,204.66666666666666,212.22222222222223,255,202.33333333333334,203.33333333333334,210.33333333333334,255,200.77777777777777,201.88888888888889,208.33333333333334,255,192,192.77777777777777,197.66666666666666,255,174.55555555555554,174.77777777777777,177.44444444444446,255,149.11111111111111,149,150,255,127.22222222222223,127.22222222222223,128,255,112.55555555555556,112.66666666666667,114.33333333333333,255,113.66666666666667,113.55555555555556,116.44444444444444,255,118.55555555555556,118.33333333333333,122.22222222222223,255,121.11111111111111,121.22222222222223,126.11111111111111,255,136.77777777777777,136.11111111111111,138.22222222222223,255,151.66666666666666,149.77777777777777,149.33333333333334,255,169.88888888888889,166.44444444444446,164.11111111111111,255,163.11111111111111,159.44444444444446,159.22222222222223,255,153,149.77777777777777,151.66666666666666,255,143.44444444444446,141.44444444444446,146.44444444444446,255,134.88888888888889,134.66666666666666,143.22222222222223,255,130.55555555555554,131.77777777777777,143.77777777777777,255,127.88888888888889,130,144.33333333333334,255,130,132.33333333333334,147.88888888888889,255,133,135.66666666666666,152.88888888888889,255,135.66666666666666,138.66666666666666,157.11111111111111,255,138.11111111111111,141.33333333333334,161,255,140.77777777777777,144.22222222222223,164.66666666666666,255,142.66666666666666,146.22222222222223,167.11111111111111,255,206.88888888888889,208.55555555555554,218.22222222222223,255,206.44444444444446,208,217.33333333333334,255,205.77777777777777,207.22222222222223,216.22222222222223,255,205,206.33333333333334,215.22222222222223,255,204.55555555555554,205.88888888888889,214.33333333333334,255,204.11111111111111,205.33333333333334,213.22222222222223,255,203.55555555555554,204.55555555555554,211.88888888888889,255,202.44444444444446,203.22222222222223,210,255,201,201.77777777777777,207.88888888888889,255,198.88888888888889,199.44444444444446,204.55555555555554,255,189.11111111111111,189.44444444444446,192.66666666666666,255,173.22222222222223,173.22222222222223,174.66666666666666,255,155.66666666666666,155.66666666666666,156,255,145.66666666666666,145.44444444444446,146.22222222222223,255,142.55555555555554,142.22222222222223,143.88888888888889,255,141.66666666666666,141.33333333333334,143.77777777777777,255,139.55555555555554,139.44444444444446,142.22222222222223,255,144.55555555555554,144.44444444444446,145.44444444444446,255,148.44444444444446,147.77777777777777,146.77777777777777,255,148.33333333333334,147.11111111111111,145.33333333333334,255,137,135.33333333333334,135.33333333333334,255,124.88888888888889,123.77777777777777,126.55555555555556,255,119.66666666666667,119.88888888888889,126.55555555555556,255,120,121.66666666666667,132.44444444444446,255,124.44444444444444,127,141.33333333333334,255,129.11111111111111,131.77777777777777,148,255,133.22222222222223,135.88888888888889,153.33333333333334,255,136.33333333333334,139.11111111111111,157.88888888888889,255,139,142,161.66666666666666,255,141.44444444444446,144.66666666666666,165.11111111111111,255,144.11111111111111,147.55555555555554,168.33333333333334,255,146,149.55555555555554,170.55555555555554,255,206.88888888888889,208.33333333333334,217.88888888888889,255,206.66666666666666,208.11111111111111,217.22222222222223,255,206.11111111111111,207.44444444444446,216.22222222222223,255,205.22222222222223,206.44444444444446,215.22222222222223,255,204.44444444444446,205.55555555555554,214.11111111111111,255,203.88888888888889,205,213,255,203.44444444444446,204.33333333333334,211.77777777777777,255,202.55555555555554,203.22222222222223,210,255,201.22222222222223,201.77777777777777,207.88888888888889,255,199.66666666666666,200,205.22222222222223,255,198.22222222222223,198.55555555555554,202.33333333333334,255,193.22222222222223,193.33333333333334,195.66666666666666,255,186.33333333333334,186.44444444444446,187.77777777777777,255,179.33333333333334,179.11111111111111,180.33333333333334,255,176,175.77777777777777,176.77777777777777,255,175,174.55555555555554,175.44444444444446,255,173.22222222222223,172.88888888888889,173.33333333333334,255,173,172.33333333333334,172.22222222222223,255,168.11111111111111,167.55555555555554,166.55555555555554,255,157.22222222222223,156.77777777777777,156.11111111111111,255,141.11111111111111,141.11111111111111,142,255,129.88888888888889,130.33333333333334,134.33333333333334,255,129.11111111111111,130.22222222222223,138.22222222222223,255,133.11111111111111,135,146.88888888888889,255,138.33333333333334,140.88888888888889,155.44444444444446,255,141.44444444444446,144.22222222222223,160.11111111111111,255,144.88888888888889,147.66666666666666,164.44444444444446,255,147.77777777777777,150.44444444444446,168.22222222222223,255,150.22222222222223,153,171.44444444444446,255,152.33333333333334,155.22222222222223,174.33333333333334,255,154.22222222222223,157.33333333333334,176.88888888888889,255,155.44444444444446,158.66666666666666,178.55555555555554,255,207,208.33333333333334,217.88888888888889,255,206.88888888888889,208.33333333333334,217.33333333333334,255,206.44444444444446,207.77777777777777,216.44444444444446,255,205.44444444444446,206.66666666666666,215.44444444444446,255,204.44444444444446,205.44444444444446,214.22222222222223,255,203.66666666666666,204.66666666666666,213,255,203.11111111111111,204,211.66666666666666,255,202.44444444444446,203,209.88888888888889,255,201.44444444444446,201.77777777777777,208,255,200.44444444444446,200.55555555555554,206,255,199.11111111111111,199.55555555555554,204.11111111111111,255,198.22222222222223,198.55555555555554,202.11111111111111,255,197.66666666666666,198,200.55555555555554,255,197.33333333333334,197.22222222222223,199,255,196.22222222222223,196.33333333333334,197.11111111111111,255,194.77777777777777,194.55555555555554,195,255,192.77777777777777,192.55555555555554,192.55555555555554,255,190.33333333333334,189.55555555555554,189.55555555555554,255,186.55555555555554,186,185.44444444444446,255,177.88888888888889,177.44444444444446,177.22222222222223,255,165.55555555555554,165.66666666666666,166.88888888888889,255,154.44444444444446,155.11111111111111,160,255,150,151.22222222222223,160.11111111111111,255,150.88888888888889,152.66666666666666,164.88888888888889,255,152.66666666666666,155,168.66666666666666,255,154.33333333333334,156.88888888888889,171.55555555555554,255,156.33333333333334,158.88888888888889,174.22222222222223,255,158.44444444444446,160.77777777777777,177,255,160.33333333333334,162.88888888888889,179.55555555555554,255,162,164.55555555555554,182,255,163.22222222222223,166,184.11111111111111,255,163.88888888888889,166.66666666666666,185.44444444444446,255]

const clamp = (num, a, b) => Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b))

for (let x = 0; x < W; x++) {
	for (let y = 0; y < H; y++) {

		let [r,g,b] = [Const(0), Const(0), Const(0)];

		// Accumulate pixels for averaging
		for (let i = -1; i < 1; i++) {
			for (let j = -1; j < 1; j++) {

				// Convert 2D pixel coordinate to 1D row-major array index
				const xi = clamp(x + i, 0, W - 1);
				const yj = clamp(y + j, 0, H - 1);
				const idx = (yj * W + xi) * 3;

				r = Add(r, guess_image[idx + 0]);
				g = Add(g, guess_image[idx + 1]);
				b = Add(b, guess_image[idx + 2]);
			}
		}

		// Set result to average 
		const idx = (y * W + x) * 3;
		blurred_guess_image[idx + 0] = Divide(r, Const(9));
		blurred_guess_image[idx + 1] = Divide(g, Const(9));
		blurred_guess_image[idx + 2] = Divide(b, Const(9));
	}
}



let loss = Const(0);

for (let x = 0; x < W; x++) {
	for (let y = 0; y < H; y++) {

		const idx = (y * W + x) * 3;
		let dr = Add(blurred_guess_image[idx + 0], Const(-observed_image[idx + 0]));
		let dg = Add(blurred_guess_image[idx + 1], Const(-observed_image[idx + 1]));
		let db = Add(blurred_guess_image[idx + 2], Const(-observed_image[idx + 2]));

		/*
		loss = Add(loss, Times(dr, dr));
		loss = Add(loss, Times(dg, dg));
		loss = Add(loss, Times(db, db));
		*/
		loss = Add(Add(loss, Times(dr,dr)), Add(Times(dg,dg), Times(db,db)));
	}
}
console.log("loss", loss)


function gradient_descent_step(step_size) {
	
	// Clear output values and gradients
	reset(loss);

	// Forward pass
	forward(loss);

	// Backward pass
	loss.grad = 1;
	backward(loss);

	// Move parameters along gradient 
	for (let i = 0; i < W * H * 3; i++) {
		let p = guess_image[i];
		p.in[0] -= step_size * p.grad;
	}
}

gradient_descent_step(10)

//console.log("loss.in[0].in", loss.in[0].in[0].in[0].in[0].in[0].in[0].in[0].in[0].in[0].in[0].in[0])